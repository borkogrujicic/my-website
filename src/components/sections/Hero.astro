---
/**
 * Hero Section Component
 *
 * A large, centered hero section with title, subtitle, CTA buttons, and an optional badge.
 * Features a decorative GitHub contribution-style grid pattern background.
 *
 * @example
 * ```astro
 * <Hero
 *   title="Build amazing products faster"
 *   subtitle="Pre-built components for Astro.js"
 *   badge="v1.0"
 *   primaryCta={{ href: "/sections", label: "Browse Components" }}
 *   secondaryCta={{ href: "https://github.com/holger1411/astrodeck", label: "GitHub" }}
 * />
 * ```
 *
 * @customization
 * - Edit title/subtitle props for custom content
 * - Change CTA buttons by modifying primaryCta/secondaryCta props
 * - Remove badge by omitting the badge prop
 * - Adjust grid pattern by modifying gridSize, squareSize variables (lines 13-16)
 * - Customize colors via Tailwind classes (background uses currentColor for theme support)
 */
interface Props {
  title: string;
  subtitle: string;
  primaryCta?: { href: string; label: string };
  secondaryCta?: { href: string; label: string };
  badge?: string;
}

const { title, subtitle, primaryCta, secondaryCta, badge } = Astro.props;

// Generate contribution-like data in circular pattern for SVG
const gridSize = 80;
const centerX = gridSize / 2;
const centerY = gridSize / 2;
const squareSize = 12;
const gap = 1;

const getCircularIntensity = (x: number, y: number) => {
  // Calculate distance from center
  const dx = x - centerX;
  const dy = y - centerY;
  const distance = Math.sqrt(dx * dx + dy * dy);

  // Create concentric circles effect
  const angle = Math.atan2(dy, dx);
  const circlePattern = Math.sin(distance * 0.2 + angle * 2) * 2 + 2;
  const randomFactor = Math.random() * 1.5;

  // Fade out towards edges
  const maxRadius = gridSize / 2;
  const fadeFactor = Math.max(0, 1 - (distance / maxRadius));

  const combined = (circlePattern + randomFactor) * fadeFactor;
  return Math.floor(Math.min(4, combined));
};

// Generate SVG rects
const rects = [];
for (let y = 0; y < gridSize; y++) {
  for (let x = 0; x < gridSize; x++) {
    const intensity = getCircularIntensity(x, y);
    const opacity = intensity === 0 ? 0 : intensity * 0.25;
    if (opacity > 0) {
      const xPos = x * (squareSize + gap);
      const yPos = y * (squareSize + gap);
      rects.push({ x: xPos, y: yPos, opacity });
    }
  }
}

const svgWidth = gridSize * (squareSize + gap);
const svgHeight = gridSize * (squareSize + gap);
---

<section class="min-h-[50vh] flex items-center py-16 md:py-24 relative overflow-hidden">
  <!-- GitHub Contribution Grid Background as SVG -->
  <div class="absolute inset-0 flex items-center justify-center opacity-10 pointer-events-none" style="z-index: 0;">
    <svg width={svgWidth} height={svgHeight} xmlns="http://www.w3.org/2000/svg" class="text-foreground">
      {rects.map(rect => (
        <rect
          x={rect.x}
          y={rect.y}
          width={squareSize}
          height={squareSize}
          rx="2"
          fill="currentColor"
          opacity={rect.opacity}
        />
      ))}
    </svg>
  </div>

  <div class="container max-w-5xl mx-auto flex flex-col items-center gap-6 text-center relative" style="z-index: 1;">
    {badge && (
      <div class="inline-flex items-center gap-2 rounded-full border px-4 py-1.5 text-sm font-medium">
        <span class="bg-foreground text-background px-2 py-0.5 rounded-md font-semibold text-xs">
          v1.0
        </span>
        <span>Open Source & MIT Licensed</span>
      </div>
    )}
    <h1 class="text-5xl font-bold leading-tight tracking-tight md:text-7xl lg:text-8xl lg:leading-[1.1] max-w-5xl">
      {title}
    </h1>
    <p class="max-w-[800px] text-xl text-muted-foreground md:text-2xl">
      {subtitle}
    </p>
    <div class="flex flex-col sm:flex-row gap-4 mt-4">
      {primaryCta && (
        <a
          href={primaryCta.href}
          class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 bg-primary text-primary-foreground hover:bg-primary/90 h-12 px-8 shadow-xl shadow-primary/25"
        >
          {primaryCta.label}
        </a>
      )}
      {secondaryCta && (
        <a
          href={secondaryCta.href}
          class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-12 px-8"
        >
          {secondaryCta.label}
        </a>
      )}
    </div>
  </div>
</section>
